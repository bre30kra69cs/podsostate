# Внутренности

Следует постараться изначально придать машине следующие свойства:

- хорошая типизация
- приличная производительность
- декларативность описания
- неявная валидация схем
- возможность легко конфигурировать валидацию
- апи удобный для управления состояниями
- фабричность
- апи паралельности
- апи иерархии
- апи стейт менеджера

## Хорошая типизация

Типизация эвентов должна осуществлятся за счет типов литералов строк?

Следует ли вообще пологаться на литеральные типы? Мб минимальным и базовым свойством языка должен стать факт
ссылочности у объектов, иначе говоря уникальности ссылок? По идее незнакомый эвент состояния не должен
вызывать варнингов и экспешенов.

> Сложно использовать систему типов так, чтоб не бзать уникальных литеральных типов и точно выводить
> ошибки принадлежности и корректности переходов и использования эвентов из за структурной типизации.

Следует реализовать ядерную часть fsm на описании объекта с выводами типов

- [ ] Валидация детерменировасти fsm

## Приличная производительность

Следует использовть подход с мутациями и меньше замыканий. Либо же првоерсти ресерч о том насколько замыкания в цифрах
могут ухудшить произовдительность и потребление памяти + затем на бенчах проверить у себя.

## Апи иерархии

Следует создать базовый тип узла машины, который будет наследовать тип состояния и тип машины.
Мб так же следует задавать машину как математическую машину.

---

## Вопросы

- Стоит ли добавить в возможность конфигурации строгость реагироания стейта на незнакомый эвент?
- Как правильно предоставить апи для расширения функционала? Апгрейды?
- Делать ли внутренние расширения как апгрейды?
- Разделять ли коре часть на фронт и бэк?
- Как правильно заюзать композиуию для единого интерфейса?
- Должны ли внутренние эвенты кмитить новые эвенты?
- Должен ли состояние и переход быть представлены как fsm?
- Следует ли разделять активность и эффект и следует ли давать возможность делать экшоны асинхронными?
- Апи валидации?
- Определять машину математически или схематически?
- Как следует фризить все выходы? И вообще следует ли доверять выходам из машины и гарантии что там
  не будет мутаций?
